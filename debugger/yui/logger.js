YAHOO.widget.LogMsg=function(oConfigs){if(oConfigs&&oConfigs.constructor==Object)for(var param in oConfigs)this[param]=oConfigs[param]},YAHOO.widget.LogMsg.prototype.msg=null,YAHOO.widget.LogMsg.prototype.time=null,YAHOO.widget.LogMsg.prototype.category=null,YAHOO.widget.LogMsg.prototype.source=null,YAHOO.widget.LogMsg.prototype.sourceDetail=null,YAHOO.widget.LogWriter=function(sSource){sSource?this._source=sSource:YAHOO.log("Could not instantiate LogWriter due to invalid source.","error","LogWriter")},YAHOO.widget.LogWriter.prototype.toString=function(){return"LogWriter "+this._sSource},YAHOO.widget.LogWriter.prototype.log=function(sMsg,sCategory){YAHOO.widget.Logger.log(sMsg,sCategory,this._source)},YAHOO.widget.LogWriter.prototype.getSource=function(){return this._sSource},YAHOO.widget.LogWriter.prototype.setSource=function(sSource){sSource?this._sSource=sSource:YAHOO.log("Could not set source due to invalid source.","error",this.toString())},YAHOO.widget.LogWriter.prototype._source=null,YAHOO.widget.LogReader=function(elContainer,oConfigs){if(this._sName=YAHOO.widget.LogReader._index,YAHOO.widget.LogReader._index++,this._buffer=[],this._filterCheckboxes={},this._lastTime=YAHOO.widget.Logger.getStartTime(),oConfigs&&oConfigs.constructor==Object)for(var param in oConfigs)this[param]=oConfigs[param];this._initContainerEl(elContainer),this._elContainer?(this._initHeaderEl(),this._initConsoleEl(),this._initFooterEl(),this._initDragDrop(),this._initCategories(),this._initSources(),YAHOO.widget.Logger.newLogEvent.subscribe(this._onNewLog,this),YAHOO.widget.Logger.logResetEvent.subscribe(this._onReset,this),YAHOO.widget.Logger.categoryCreateEvent.subscribe(this._onCategoryCreate,this),YAHOO.widget.Logger.sourceCreateEvent.subscribe(this._onSourceCreate,this),this._filterLogs(),YAHOO.log("LogReader initialized",null,this.toString())):YAHOO.log("Could not instantiate LogReader due to an invalid container element "+elContainer,"error",this.toString())},YAHOO.widget.LogReader.prototype.logReaderEnabled=!0,YAHOO.widget.LogReader.prototype.width=null,YAHOO.widget.LogReader.prototype.height=null,YAHOO.widget.LogReader.prototype.top=null,YAHOO.widget.LogReader.prototype.left=null,YAHOO.widget.LogReader.prototype.right=null,YAHOO.widget.LogReader.prototype.bottom=null,YAHOO.widget.LogReader.prototype.fontSize=null,YAHOO.widget.LogReader.prototype.footerEnabled=!0,YAHOO.widget.LogReader.prototype.verboseOutput=!0,YAHOO.widget.LogReader.prototype.newestOnTop=!0,YAHOO.widget.LogReader.prototype.outputBuffer=100,YAHOO.widget.LogReader.prototype.thresholdMax=500,YAHOO.widget.LogReader.prototype.thresholdMin=100,YAHOO.widget.LogReader.prototype.isCollapsed=!1,YAHOO.widget.LogReader.prototype.isPaused=!1,YAHOO.widget.LogReader.prototype.draggable=!0,YAHOO.widget.LogReader.prototype.toString=function(){return"LogReader instance"+this._sName},YAHOO.widget.LogReader.prototype.pause=function(){this.isPaused=!0,this._btnPause.value="Resume",this._timeout=null,this.logReaderEnabled=!1},YAHOO.widget.LogReader.prototype.resume=function(){this.isPaused=!1,this._btnPause.value="Pause",this.logReaderEnabled=!0,this._printBuffer()},YAHOO.widget.LogReader.prototype.hide=function(){this._elContainer.style.display="none"},YAHOO.widget.LogReader.prototype.show=function(){this._elContainer.style.display="block"},YAHOO.widget.LogReader.prototype.collapse=function(){this._elConsole.style.display="none",this._elFt&&(this._elFt.style.display="none"),this._btnCollapse.value="Expand",this.isCollapsed=!0},YAHOO.widget.LogReader.prototype.expand=function(){this._elConsole.style.display="block",this._elFt&&(this._elFt.style.display="block"),this._btnCollapse.value="Collapse",this.isCollapsed=!1},YAHOO.widget.LogReader.prototype.getCheckbox=function(filter){return this._filterCheckboxes[filter]},YAHOO.widget.LogReader.prototype.getCategories=function(){return this._categoryFilters},YAHOO.widget.LogReader.prototype.showCategory=function(sCategory){var filtersArray=this._categoryFilters;if(filtersArray.indexOf){if(-1<filtersArray.indexOf(sCategory))return}else for(var i=0;i<filtersArray.length;i++)if(filtersArray[i]===sCategory)return;this._categoryFilters.push(sCategory),this._filterLogs();var elCheckbox=this.getCheckbox(sCategory);elCheckbox&&(elCheckbox.checked=!0)},YAHOO.widget.LogReader.prototype.hideCategory=function(sCategory){for(var filtersArray=this._categoryFilters,i=0;i<filtersArray.length;i++)if(sCategory==filtersArray[i]){filtersArray.splice(i,1);break}this._filterLogs();var elCheckbox=this.getCheckbox(sCategory);elCheckbox&&(elCheckbox.checked=!1)},YAHOO.widget.LogReader.prototype.getSources=function(){return this._sourceFilters},YAHOO.widget.LogReader.prototype.showSource=function(sSource){var filtersArray=this._sourceFilters;if(filtersArray.indexOf){if(-1<filtersArray.indexOf(sSource))return}else for(var i=0;i<filtersArray.length;i++)if(sSource==filtersArray[i])return;filtersArray.push(sSource),this._filterLogs();var elCheckbox=this.getCheckbox(sSource);elCheckbox&&(elCheckbox.checked=!0)},YAHOO.widget.LogReader.prototype.hideSource=function(sSource){for(var filtersArray=this._sourceFilters,i=0;i<filtersArray.length;i++)if(sSource==filtersArray[i]){filtersArray.splice(i,1);break}this._filterLogs();var elCheckbox=this.getCheckbox(sSource);elCheckbox&&(elCheckbox.checked=!1)},YAHOO.widget.LogReader.prototype.clearConsole=function(){this._timeout=null,this._buffer=[],this._consoleMsgCount=0;for(var elConsole=this._elConsole;elConsole.hasChildNodes();)elConsole.removeChild(elConsole.firstChild)},YAHOO.widget.LogReader.prototype.setTitle=function(sTitle){this._title.innerHTML=this.html2Text(sTitle)},YAHOO.widget.LogReader.prototype.getLastTime=function(){return this._lastTime},YAHOO.widget.LogReader.prototype.formatMsg=function(oLogMsg){var category=oLogMsg.category,label=category.substring(0,4).toUpperCase(),time=oLogMsg.time,localTime=time.toLocaleTimeString?time.toLocaleTimeString():time.toString(),time=time.getTime(),totalTime=time-YAHOO.widget.Logger.getStartTime(),time=time-this.getLastTime(),source=oLogMsg.source,sourceDetail=oLogMsg.sourceDetail,sourceDetail=sourceDetail?source+" "+sourceDetail:source,source=this.html2Text(YAHOO.lang.dump(oLogMsg.msg));return(this.verboseOutput?['<pre class="yui-log-verbose"><p><span class=\'',category,"'>",label,"</span> ",totalTime,"ms (+",time,") ",localTime,": ","</p><p>",sourceDetail,": </p><p>",source,"</p></pre>"]:["<pre><p><span class='",category,"'>",label,"</span> ",totalTime,"ms (+",time,") ",localTime,": ",sourceDetail,": ",source,"</p></pre>"]).join("")},YAHOO.widget.LogReader.prototype.html2Text=function(sHtml){return sHtml?(sHtml+="").replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;"):""},YAHOO.widget.LogReader._index=0,YAHOO.widget.LogReader.prototype._sName=null,YAHOO.widget.LogReader.prototype._buffer=null,YAHOO.widget.LogReader.prototype._consoleMsgCount=0,YAHOO.widget.LogReader.prototype._lastTime=null,YAHOO.widget.LogReader.prototype._timeout=null,YAHOO.widget.LogReader.prototype._filterCheckboxes=null,YAHOO.widget.LogReader.prototype._categoryFilters=null,YAHOO.widget.LogReader.prototype._sourceFilters=null,YAHOO.widget.LogReader.prototype._elContainer=null,YAHOO.widget.LogReader.prototype._elHd=null,YAHOO.widget.LogReader.prototype._elCollapse=null,YAHOO.widget.LogReader.prototype._btnCollapse=null,YAHOO.widget.LogReader.prototype._title=null,YAHOO.widget.LogReader.prototype._elConsole=null,YAHOO.widget.LogReader.prototype._elFt=null,YAHOO.widget.LogReader.prototype._elBtns=null,YAHOO.widget.LogReader.prototype._elCategoryFilters=null,YAHOO.widget.LogReader.prototype._elSourceFilters=null,YAHOO.widget.LogReader.prototype._btnPause=null,YAHOO.widget.LogReader.prototype._btnClear=null,YAHOO.widget.LogReader.prototype._initContainerEl=function(elContainer){var containerStyle;(elContainer=YAHOO.util.Dom.get(elContainer))&&elContainer.tagName&&"div"==elContainer.tagName.toLowerCase()?(this._elContainer=elContainer,YAHOO.util.Dom.addClass(this._elContainer,"yui-log")):(this._elContainer=document.body.appendChild(document.createElement("div")),YAHOO.util.Dom.addClass(this._elContainer,"yui-log"),YAHOO.util.Dom.addClass(this._elContainer,"yui-log-container"),containerStyle=this._elContainer.style,this.width&&(containerStyle.width=this.width),this.right&&(containerStyle.right=this.right),this.top&&(containerStyle.top=this.top),this.left&&(containerStyle.left=this.left,containerStyle.right="auto"),this.bottom&&(containerStyle.bottom=this.bottom,containerStyle.top="auto"),this.fontSize&&(containerStyle.fontSize=this.fontSize),-1!=navigator.userAgent.toLowerCase().indexOf("opera")&&(document.body.style+=""))},YAHOO.widget.LogReader.prototype._initHeaderEl=function(){this._elHd&&(YAHOO.util.Event.purgeElement(this._elHd,!0),this._elHd.innerHTML=""),this._elHd=this._elContainer.appendChild(document.createElement("div")),this._elHd.id="yui-log-hd"+this._sName,this._elHd.className="yui-log-hd",this._elCollapse=this._elHd.appendChild(document.createElement("div")),this._elCollapse.className="yui-log-btns",this._btnCollapse=document.createElement("input"),this._btnCollapse.type="button",this._btnCollapse.className="yui-log-button",this._btnCollapse.value="Collapse",this._btnCollapse=this._elCollapse.appendChild(this._btnCollapse),YAHOO.util.Event.addListener(this._btnCollapse,"click",this._onClickCollapseBtn,this),this._title=this._elHd.appendChild(document.createElement("h4")),this._title.innerHTML="Logger Console"},YAHOO.widget.LogReader.prototype._initConsoleEl=function(){this._elConsole&&(YAHOO.util.Event.purgeElement(this._elConsole,!0),this._elConsole.innerHTML=""),this._elConsole=this._elContainer.appendChild(document.createElement("div")),this._elConsole.className="yui-log-bd",this.height&&(this._elConsole.style.height=this.height)},YAHOO.widget.LogReader.prototype._initFooterEl=function(){this.footerEnabled&&(this._elFt&&(YAHOO.util.Event.purgeElement(this._elFt,!0),this._elFt.innerHTML=""),this._elFt=this._elContainer.appendChild(document.createElement("div")),this._elFt.className="yui-log-ft",this._elBtns=this._elFt.appendChild(document.createElement("div")),this._elBtns.className="yui-log-btns",this._btnPause=document.createElement("input"),this._btnPause.type="button",this._btnPause.className="yui-log-button",this._btnPause.value="Pause",this._btnPause=this._elBtns.appendChild(this._btnPause),YAHOO.util.Event.addListener(this._btnPause,"click",this._onClickPauseBtn,this),this._btnClear=document.createElement("input"),this._btnClear.type="button",this._btnClear.className="yui-log-button",this._btnClear.value="Clear",this._btnClear=this._elBtns.appendChild(this._btnClear),YAHOO.util.Event.addListener(this._btnClear,"click",this._onClickClearBtn,this),this._elCategoryFilters=this._elFt.appendChild(document.createElement("div")),this._elCategoryFilters.className="yui-log-categoryfilters",this._elSourceFilters=this._elFt.appendChild(document.createElement("div")),this._elSourceFilters.className="yui-log-sourcefilters")},YAHOO.widget.LogReader.prototype._initDragDrop=function(){YAHOO.util.DD&&this.draggable&&this._elHd&&(new YAHOO.util.DD(this._elContainer).setHandleElId(this._elHd.id),this._elHd.style.cursor="move")},YAHOO.widget.LogReader.prototype._initCategories=function(){this._categoryFilters=[];for(var aInitialCategories=YAHOO.widget.Logger.categories,j=0;j<aInitialCategories.length;j++){var sCategory=aInitialCategories[j];this._categoryFilters.push(sCategory),this._elCategoryFilters&&this._createCategoryCheckbox(sCategory)}},YAHOO.widget.LogReader.prototype._initSources=function(){this._sourceFilters=[];for(var aInitialSources=YAHOO.widget.Logger.sources,j=0;j<aInitialSources.length;j++){var sSource=aInitialSources[j];this._sourceFilters.push(sSource),this._elSourceFilters&&this._createSourceCheckbox(sSource)}},YAHOO.widget.LogReader.prototype._createCategoryCheckbox=function(sCategory){var chkCategory,elFilter;this._elFt&&((elFilter=this._elCategoryFilters.appendChild(document.createElement("span"))).className="yui-log-filtergrp",(chkCategory=document.createElement("input")).id="yui-log-filter-"+sCategory+this._sName,chkCategory.className="yui-log-filter-"+sCategory,chkCategory.type="checkbox",chkCategory.category=sCategory,(chkCategory=elFilter.appendChild(chkCategory)).checked=!0,YAHOO.util.Event.addListener(chkCategory,"click",this._onCheckCategory,this),(elFilter=elFilter.appendChild(document.createElement("label"))).htmlFor=chkCategory.id,elFilter.className=sCategory,elFilter.innerHTML=sCategory,this._filterCheckboxes[sCategory]=chkCategory)},YAHOO.widget.LogReader.prototype._createSourceCheckbox=function(sSource){var chkSource,elFilter;this._elFt&&((elFilter=this._elSourceFilters.appendChild(document.createElement("span"))).className="yui-log-filtergrp",(chkSource=document.createElement("input")).id="yui-log-filter"+sSource+this._sName,chkSource.className="yui-log-filter"+sSource,chkSource.type="checkbox",chkSource.source=sSource,(chkSource=elFilter.appendChild(chkSource)).checked=!0,YAHOO.util.Event.addListener(chkSource,"click",this._onCheckSource,this),(elFilter=elFilter.appendChild(document.createElement("label"))).htmlFor=chkSource.id,elFilter.className=sSource,elFilter.innerHTML=sSource,this._filterCheckboxes[sSource]=chkSource)},YAHOO.widget.LogReader.prototype._filterLogs=function(){null!==this._elConsole&&(this.clearConsole(),this._printToConsole(YAHOO.widget.Logger.getStack()))},YAHOO.widget.LogReader.prototype._printBuffer=function(){if((this._timeout=null)!==this._elConsole){var thresholdMax=(thresholdMax=this.thresholdMax)&&!isNaN(thresholdMax)?thresholdMax:500;if(this._consoleMsgCount<thresholdMax){for(var entries=[],i=0;i<this._buffer.length;i++)entries[i]=this._buffer[i];this._buffer=[],this._printToConsole(entries)}else this._filterLogs();this.newestOnTop||(this._elConsole.scrollTop=this._elConsole.scrollHeight)}},YAHOO.widget.LogReader.prototype._printToConsole=function(aEntries){for(var entriesLen=aEntries.length,thresholdMin=this.thresholdMin,thresholdMin=(thresholdMin=isNaN(thresholdMin)||thresholdMin>this.thresholdMax?0:thresholdMin)<entriesLen?entriesLen-thresholdMin:0,sourceFiltersLen=this._sourceFilters.length,categoryFiltersLen=this._categoryFilters.length,i=thresholdMin;i<entriesLen;i++){for(var output,okToPrint=!1,okToFilterCats=!1,entry=aEntries[i],source=entry.source,category=entry.category,j=0;j<sourceFiltersLen;j++)if(source==this._sourceFilters[j]){okToFilterCats=!0;break}if(okToFilterCats)for(var k=0;k<categoryFiltersLen;k++)if(category==this._categoryFilters[k]){okToPrint=!0;break}okToPrint&&(output=this.formatMsg(entry),this.newestOnTop?this._elConsole.innerHTML=output+this._elConsole.innerHTML:this._elConsole.innerHTML+=output,this._consoleMsgCount++,this._lastTime=entry.time.getTime())}},YAHOO.widget.LogReader.prototype._onCategoryCreate=function(sType,aArgs,oSelf){var category=aArgs[0];oSelf._categoryFilters.push(category),oSelf._elFt&&oSelf._createCategoryCheckbox(category)},YAHOO.widget.LogReader.prototype._onSourceCreate=function(sType,aArgs,oSelf){var source=aArgs[0];oSelf._sourceFilters.push(source),oSelf._elFt&&oSelf._createSourceCheckbox(source)},YAHOO.widget.LogReader.prototype._onCheckCategory=function(v,oSelf){var category=this.category;this.checked?oSelf.showCategory(category):oSelf.hideCategory(category)},YAHOO.widget.LogReader.prototype._onCheckSource=function(v,oSelf){var source=this.source;this.checked?oSelf.showSource(source):oSelf.hideSource(source)},YAHOO.widget.LogReader.prototype._onClickCollapseBtn=function(v,oSelf){oSelf.isCollapsed?oSelf.expand():oSelf.collapse()},YAHOO.widget.LogReader.prototype._onClickPauseBtn=function(v,oSelf){oSelf.isPaused?oSelf.resume():oSelf.pause()},YAHOO.widget.LogReader.prototype._onClickClearBtn=function(v,oSelf){oSelf.clearConsole()},YAHOO.widget.LogReader.prototype._onNewLog=function(sType,aArgs,oSelf){var logEntry=aArgs[0];oSelf._buffer.push(logEntry),!0===oSelf.logReaderEnabled&&null===oSelf._timeout&&(oSelf._timeout=setTimeout(function(){oSelf._printBuffer()},oSelf.outputBuffer))},YAHOO.widget.LogReader.prototype._onReset=function(sType,aArgs,oSelf){oSelf._filterLogs()},YAHOO.widget.Logger||(YAHOO.widget.Logger={loggerEnabled:!0,_browserConsoleEnabled:!1,categories:["info","warn","error","time","window"],sources:["global"],_stack:[],maxStackEntries:2500,_startTime:(new Date).getTime(),_lastTime:null,_windowErrorsHandled:!1,_origOnWindowError:null},YAHOO.widget.Logger.log=function(sMsg,sCategory,sSource){var spaceIndex,sClass,sDetail;return!!this.loggerEnabled&&(sCategory?(sCategory=sCategory.toLocaleLowerCase(),this._isNewCategory(sCategory)&&this._createNewCategory(sCategory)):sCategory="info",sClass="global",sDetail=null,sSource&&(0<(spaceIndex=sSource.indexOf(" "))?(sClass=sSource.substring(0,spaceIndex),sDetail=sSource.substring(spaceIndex,sSource.length)):sClass=sSource,this._isNewSource(sClass))&&this._createNewSource(sClass),spaceIndex=new Date,spaceIndex=new YAHOO.widget.LogMsg({msg:sMsg,time:spaceIndex,category:sCategory,source:sClass,sourceDetail:sDetail}),sClass=this._stack,(sDetail=this.maxStackEntries)&&!isNaN(sDetail)&&sClass.length>=sDetail&&sClass.shift(),sClass.push(spaceIndex),this.newLogEvent.fire(spaceIndex),this._browserConsoleEnabled&&this._printToBrowserConsole(spaceIndex),!0)},YAHOO.widget.Logger.reset=function(){this._stack=[],this._startTime=(new Date).getTime(),this.loggerEnabled=!0,this.log("Logger reset"),this.logResetEvent.fire()},YAHOO.widget.Logger.getStack=function(){return this._stack},YAHOO.widget.Logger.getStartTime=function(){return this._startTime},YAHOO.widget.Logger.disableBrowserConsole=function(){YAHOO.log("Logger output to the function console.log() has been disabled."),this._browserConsoleEnabled=!1},YAHOO.widget.Logger.enableBrowserConsole=function(){this._browserConsoleEnabled=!0,YAHOO.log("Logger output to the function console.log() has been enabled.")},YAHOO.widget.Logger.handleWindowErrors=function(){YAHOO.widget.Logger._windowErrorsHandled?YAHOO.log("Logger handling of window.onerror had already been enabled."):(window.error&&(YAHOO.widget.Logger._origOnWindowError=window.onerror),window.onerror=YAHOO.widget.Logger._onWindowError,YAHOO.widget.Logger._windowErrorsHandled=!0,YAHOO.log("Logger handling of window.onerror has been enabled."))},YAHOO.widget.Logger.unhandleWindowErrors=function(){YAHOO.widget.Logger._windowErrorsHandled?(YAHOO.widget.Logger._origOnWindowError?(window.onerror=YAHOO.widget.Logger._origOnWindowError,YAHOO.widget.Logger._origOnWindowError=null):window.onerror=null,YAHOO.widget.Logger._windowErrorsHandled=!1,YAHOO.log("Logger handling of window.onerror has been disabled.")):YAHOO.log("Logger handling of window.onerror had already been disabled.")},YAHOO.widget.Logger.categoryCreateEvent=new YAHOO.util.CustomEvent("categoryCreate",this,!0),YAHOO.widget.Logger.sourceCreateEvent=new YAHOO.util.CustomEvent("sourceCreate",this,!0),YAHOO.widget.Logger.newLogEvent=new YAHOO.util.CustomEvent("newLog",this,!0),YAHOO.widget.Logger.logResetEvent=new YAHOO.util.CustomEvent("logReset",this,!0),YAHOO.widget.Logger._createNewCategory=function(sCategory){this.categories.push(sCategory),this.categoryCreateEvent.fire(sCategory)},YAHOO.widget.Logger._isNewCategory=function(sCategory){for(var i=0;i<this.categories.length;i++)if(sCategory==this.categories[i])return!1;return!0},YAHOO.widget.Logger._createNewSource=function(sSource){this.sources.push(sSource),this.sourceCreateEvent.fire(sSource)},YAHOO.widget.Logger._isNewSource=function(sSource){if(sSource){for(var i=0;i<this.sources.length;i++)if(sSource==this.sources[i])return!1;return!0}},YAHOO.widget.Logger._printToBrowserConsole=function(oEntry){var localTime,elapsedTime,time;window.console&&console.log&&(oEntry.category,oEntry.category.substring(0,4).toUpperCase(),localTime=(time=oEntry.time).toLocaleTimeString?time.toLocaleTimeString():time.toString(),time=time.getTime(),elapsedTime=YAHOO.widget.Logger._lastTime?time-YAHOO.widget.Logger._lastTime:0,YAHOO.widget.Logger._lastTime=time,time=localTime+" ("+elapsedTime+"ms): "+oEntry.source+": "+oEntry.msg,console.log(time))},YAHOO.widget.Logger._onWindowError=function(sMsg,sUrl,sLine){try{YAHOO.widget.Logger.log(sMsg+" ("+sUrl+", line "+sLine+")","window"),YAHOO.widget.Logger._origOnWindowError&&YAHOO.widget.Logger._origOnWindowError()}catch(e){return!1}},YAHOO.widget.Logger.log("Logger initialized")),YAHOO.register("logger",YAHOO.widget.Logger,{version:"2.5.0",build:"895"});