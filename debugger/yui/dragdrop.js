var Event;YAHOO.util.DragDropMgr||(YAHOO.util.DragDropMgr=(Event=YAHOO.util.Event,{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,interactionInfo:null,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(sMethod,args){for(var i in this.ids)for(var j in this.ids[i]){j=this.ids[i][j];this.isTypeOfDD(j)&&j[sMethod].apply(j,args)}},_onLoad:function(){this.init(),Event.on(document,"mouseup",this.handleMouseUp,this,!0),Event.on(document,"mousemove",this.handleMouseMove,this,!0),Event.on(window,"unload",this._onUnload,this,!0),Event.on(window,"resize",this._onResize,this,!0)},_onResize:function(e){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:3,clickTimeThresh:1e3,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,fromTimeout:!1,regDragDrop:function(oDD,sGroup){this.initialized||this.init(),this.ids[sGroup]||(this.ids[sGroup]={}),this.ids[sGroup][oDD.id]=oDD},removeDDFromGroup:function(oDD,sGroup){this.ids[sGroup]||(this.ids[sGroup]={});var obj=this.ids[sGroup];obj&&obj[oDD.id]&&delete obj[oDD.id]},_remove:function(oDD){for(var g in oDD.groups)g&&this.ids[g][oDD.id]&&delete this.ids[g][oDD.id];delete this.handleIds[oDD.id]},regHandle:function(sDDId,sHandleId){this.handleIds[sDDId]||(this.handleIds[sDDId]={}),this.handleIds[sDDId][sHandleId]=sHandleId},isDragDrop:function(id){return!!this.getDDById(id)},getRelated:function(p_oDD,bTargetsOnly){var i,oDDs=[];for(i in p_oDD.groups)for(var j in this.ids[i]){j=this.ids[i][j];!this.isTypeOfDD(j)||bTargetsOnly&&!j.isTarget||(oDDs[oDDs.length]=j)}return oDDs},isLegalTarget:function(oDD,oTargetDD){for(var targets=this.getRelated(oDD,!0),i=0,len=targets.length;i<len;++i)if(targets[i].id==oTargetDD.id)return!0;return!1},isTypeOfDD:function(oDD){return oDD&&oDD.__ygDragDrop},isHandle:function(sDDId,sHandleId){return this.handleIds[sDDId]&&this.handleIds[sDDId][sHandleId]},getDDById:function(id){for(var i in this.ids)if(this.ids[i][id])return this.ids[i][id];return null},handleMouseDown:function(e,oDD){this.currentTarget=YAHOO.util.Event.getTarget(e);var el=(this.dragCurrent=oDD).getEl();this.startX=YAHOO.util.Event.getPageX(e),this.startY=YAHOO.util.Event.getPageY(e),this.deltaX=this.startX-el.offsetLeft,this.deltaY=this.startY-el.offsetTop,this.dragThreshMet=!1,this.clickTimeout=setTimeout(function(){var DDM=YAHOO.util.DDM;DDM.startDrag(DDM.startX,DDM.startY),DDM.fromTimeout=!0},this.clickTimeThresh)},startDrag:function(x,y){clearTimeout(this.clickTimeout);var dc=this.dragCurrent;dc&&dc.events.b4StartDrag&&(dc.b4StartDrag(x,y),dc.fireEvent("b4StartDragEvent",{x:x,y:y})),dc&&dc.events.startDrag&&(dc.startDrag(x,y),dc.fireEvent("startDragEvent",{x:x,y:y})),this.dragThreshMet=!0},handleMouseUp:function(e){this.dragCurrent&&(clearTimeout(this.clickTimeout),this.dragThreshMet&&(this.fromTimeout&&this.handleMouseMove(e),this.fromTimeout=!1,this.fireEvents(e,!0)),this.stopDrag(e),this.stopEvent(e))},stopEvent:function(e){this.stopPropagation&&YAHOO.util.Event.stopPropagation(e),this.preventDefault&&YAHOO.util.Event.preventDefault(e)},stopDrag:function(e,silent){var dc=this.dragCurrent;dc&&!silent&&(this.dragThreshMet&&(dc.events.b4EndDrag&&(dc.b4EndDrag(e),dc.fireEvent("b4EndDragEvent",{e:e})),dc.events.endDrag)&&(dc.endDrag(e),dc.fireEvent("endDragEvent",{e:e})),dc.events.mouseUp)&&(dc.onMouseUp(e),dc.fireEvent("mouseUpEvent",{e:e})),this.dragCurrent=null,this.dragOvers={}},handleMouseMove:function(e){var diffX,diffY,dc=this.dragCurrent;if(dc){if(YAHOO.util.Event.isIE&&!e.button)return this.stopEvent(e),this.handleMouseUp(e);e.clientX<0||e.clientY,!this.dragThreshMet&&(diffX=Math.abs(this.startX-YAHOO.util.Event.getPageX(e)),diffY=Math.abs(this.startY-YAHOO.util.Event.getPageY(e)),diffX>this.clickPixelThresh||diffY>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY),this.dragThreshMet&&(dc&&dc.events.b4Drag&&(dc.b4Drag(e),dc.fireEvent("b4DragEvent",{e:e})),dc&&dc.events.drag&&(dc.onDrag(e),dc.fireEvent("dragEvent",{e:e})),dc)&&this.fireEvents(e,!1),this.stopEvent(e)}},fireEvents:function(e,isDrop){var dc=this.dragCurrent;if(dc&&!dc.isLocked()&&!dc.dragOnly){var i,sGroup,inG,x=YAHOO.util.Event.getPageX(e),y=YAHOO.util.Event.getPageY(e),pt=new YAHOO.util.Point(x,y),x=dc.getTargetCoord(pt.x,pt.y),y=dc.getDragEl(),events=["out","over","drop","enter"],curRegion=new YAHOO.util.Region(x.y,x.x+y.offsetWidth,x.y+y.offsetHeight,x.x),oldOvers=[],inGroupsObj={},inGroups=[],data={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(i in this.dragOvers){var ddo=this.dragOvers[i];this.isTypeOfDD(ddo)&&(this.isOverTarget(pt,ddo,this.mode,curRegion)||data.outEvts.push(ddo),oldOvers[i]=!0,delete this.dragOvers[i])}for(sGroup in dc.groups)if("string"==typeof sGroup)for(i in this.ids[sGroup]){var oDD=this.ids[sGroup][i];this.isTypeOfDD(oDD)&&oDD.isTarget&&!oDD.isLocked()&&oDD!=dc&&this.isOverTarget(pt,oDD,this.mode,curRegion)&&(inGroupsObj[sGroup]=!0,isDrop?data.dropEvts.push(oDD):((oldOvers[oDD.id]?data.overEvts:data.enterEvts).push(oDD),this.dragOvers[oDD.id]=oDD))}for(inG in this.interactionInfo={out:data.outEvts,enter:data.enterEvts,over:data.overEvts,drop:data.dropEvts,point:pt,draggedRegion:curRegion,sourceRegion:this.locationCache[dc.id],validDrop:isDrop},inGroupsObj)inGroups.push(inG);for(isDrop&&!data.dropEvts.length&&(this.interactionInfo.validDrop=!1,dc.events.invalidDrop)&&(dc.onInvalidDrop(e),dc.fireEvent("invalidDropEvent",{e:e})),i=0;i<events.length;i++){var tmp=data[events[i]+"Evts"]?data[events[i]+"Evts"]:null;if(tmp&&tmp.length){var type=events[i].charAt(0).toUpperCase()+events[i].substr(1),ev="onDrag"+type,b4="b4Drag"+type,cev="drag"+type+"Event",check="drag"+type;if(this.mode)dc.events[b4]&&(dc[b4](e,tmp,inGroups),dc.fireEvent(b4+"Event",{event:e,info:tmp,group:inGroups})),dc.events[check]&&(dc[ev](e,tmp,inGroups),dc.fireEvent(cev,{event:e,info:tmp,group:inGroups}));else for(var b=0,len=tmp.length;b<len;++b)dc.events[b4]&&(dc[b4](e,tmp[b].id,inGroups[0]),dc.fireEvent(b4+"Event",{event:e,info:tmp[b].id,group:inGroups[0]})),dc.events[check]&&(dc[ev](e,tmp[b].id,inGroups[0]),dc.fireEvent(cev,{event:e,info:tmp[b].id,group:inGroups[0]}))}}}},getBestMatch:function(dds){var winner=null,len=dds.length;if(1==len)winner=dds[0];else for(var i=0;i<len;++i){var dd=dds[i];if(this.mode==this.INTERSECT&&dd.cursorIsOver){winner=dd;break}winner&&winner.overlap&&!(dd.overlap&&winner.overlap.getArea()<dd.overlap.getArea())||(winner=dd)}return winner},refreshCache:function(groups){for(var sGroup in groups||this.ids)if("string"==typeof sGroup)for(var i in this.ids[sGroup]){var loc,i=this.ids[sGroup][i];this.isTypeOfDD(i)&&((loc=this.getLocation(i))?this.locationCache[i.id]=loc:delete this.locationCache[i.id])}},verifyEl:function(el){try{if(el)if(el.offsetParent)return!0}catch(e){}return!1},getLocation:function(oDD){if(!this.isTypeOfDD(oDD))return null;var pos,x2,x1,el=oDD.getEl();try{pos=YAHOO.util.Dom.getXY(el)}catch(e){}return pos?(x2=(x1=pos[0])+el.offsetWidth,el=(pos=pos[1])+el.offsetHeight,pos=pos-oDD.padding[0],x2=x2+oDD.padding[1],el=el+oDD.padding[2],x1=x1-oDD.padding[3],new YAHOO.util.Region(pos,x2,el,x1)):null},isOverTarget:function(pt,oTarget,intersect,curRegion){var loc=this.locationCache[oTarget.id];if(loc&&this.useCache||(loc=this.getLocation(oTarget),this.locationCache[oTarget.id]=loc),!loc)return!1;oTarget.cursorIsOver=loc.contains(pt);var pos,dc=this.dragCurrent;if(!dc||!intersect&&!dc.constrainX&&!dc.constrainY)return oTarget.cursorIsOver;oTarget.overlap=null,curRegion||(pos=dc.getTargetCoord(pt.x,pt.y),dc=dc.getDragEl(),curRegion=new YAHOO.util.Region(pos.y,pos.x+dc.offsetWidth,pos.y+dc.offsetHeight,pos.x));dc=curRegion.intersect(loc);return!!dc&&(oTarget.overlap=dc,!!intersect||oTarget.cursorIsOver)},_onUnload:function(e,me){this.unregAll()},unregAll:function(){this.dragCurrent&&(this.stopDrag(),this.dragCurrent=null),this._execOnAll("unreg",[]),this.ids={}},elementCache:{},getElWrapper:function(id){var oWrapper=this.elementCache[id];return oWrapper=oWrapper&&oWrapper.el?oWrapper:this.elementCache[id]=new this.ElementWrapper(YAHOO.util.Dom.get(id))},getElement:function(id){return YAHOO.util.Dom.get(id)},getCss:function(id){var el=YAHOO.util.Dom.get(id);return el?el.style:null},ElementWrapper:function(el){this.el=el||null,this.id=this.el&&el.id,this.css=this.el&&el.style},getPosX:function(el){return YAHOO.util.Dom.getX(el)},getPosY:function(el){return YAHOO.util.Dom.getY(el)},swapNode:function(n1,n2){var p,s;n1.swapNode?n1.swapNode(n2):(p=n2.parentNode,(s=n2.nextSibling)==n1?p.insertBefore(n1,n2):n2==n1.nextSibling?p.insertBefore(n2,n1):(n1.parentNode.replaceChild(n2,n1),p.insertBefore(n1,s)))},getScroll:function(){var t,l,dde=document.documentElement,db=document.body;return dde&&(dde.scrollTop||dde.scrollLeft)?(t=dde.scrollTop,l=dde.scrollLeft):db&&(t=db.scrollTop,l=db.scrollLeft),{top:t,left:l}},getStyle:function(el,styleProp){return YAHOO.util.Dom.getStyle(el,styleProp)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(moveEl,targetEl){var aCoord=YAHOO.util.Dom.getXY(targetEl);YAHOO.util.Dom.setXY(moveEl,aCoord)},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight()},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth()},numericSort:function(a,b){return a-b},_timeoutCount:0,_addListeners:function(){var DDM=YAHOO.util.DDM;YAHOO.util.Event&&document?DDM._onLoad():2e3<DDM._timeoutCount||(setTimeout(DDM._addListeners,10),document&&document.body&&(DDM._timeoutCount+=1))},handleWasClicked:function(node,id){if(this.isHandle(id,node.id))return!0;for(var p=node.parentNode;p;){if(this.isHandle(id,p.id))return!0;p=p.parentNode}return!1}}),YAHOO.util.DDM=YAHOO.util.DragDropMgr,YAHOO.util.DDM._addListeners()),function(){var Event=YAHOO.util.Event,Dom=YAHOO.util.Dom;YAHOO.util.DragDrop=function(id,sGroup,config){id&&this.init(id,sGroup,config)},YAHOO.util.DragDrop.prototype={events:null,on:function(){this.subscribe.apply(this,arguments)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isTarget:!0,padding:null,dragOnly:!1,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,cursorIsOver:!1,overlap:null,b4StartDrag:function(x,y){},startDrag:function(x,y){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,id){},b4DragOver:function(e){},onDragOver:function(e,id){},b4DragOut:function(e){},onDragOut:function(e,id){},b4DragDrop:function(e){},onDragDrop:function(e,id){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},getEl:function(){return this._domRef||(this._domRef=Dom.get(this.id)),this._domRef},getDragEl:function(){return Dom.get(this.dragElId)},init:function(id,sGroup,config){for(var i in this.initTarget(id,sGroup,config),Event.on(this._domRef||this.id,"mousedown",this.handleMouseDown,this,!0),this.events)this.createEvent(i+"Event")},initTarget:function(id,sGroup,config){this.config=config||{},this.events={},this.DDM=YAHOO.util.DDM,this.groups={},"string"!=typeof id&&(this._domRef=id,id=Dom.generateId(id)),this.id=id,this.addToGroup(sGroup||"default"),this.handleElId=id,Event.onAvailable(id,this.handleOnAvailable,this,!0),this.setDragElId(id),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig()},applyConfig:function(){if(this.events={mouseDown:!0,b4MouseDown:!0,mouseUp:!0,b4StartDrag:!0,startDrag:!0,b4EndDrag:!0,endDrag:!0,drag:!0,b4Drag:!0,invalidDrop:!0,b4DragOut:!0,dragOut:!0,dragEnter:!0,b4DragOver:!0,dragOver:!0,b4DragDrop:!0,dragDrop:!0},this.config.events)for(var i in this.config.events)!1===this.config.events[i]&&(this.events[i]=!1);this.padding=this.config.padding||[0,0,0,0],this.isTarget=!1!==this.config.isTarget,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=!1!==this.config.primaryButtonOnly,this.dragOnly=!0===this.config.dragOnly},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(iTop,iRight,iBot,iLeft){this.padding=iRight||0===iRight?iBot||0===iBot?[iTop,iRight,iBot,iLeft]:[iTop,iRight,iTop,iRight]:[iTop,iTop,iTop,iTop]},setInitPosition:function(diffX,diffY){var dx,dy,p,el=this.getEl();this.DDM.verifyEl(el)?(dx=diffX||0,dy=diffY||0,p=Dom.getXY(el),this.initPageX=p[0]-dx,this.initPageY=p[1]-dy,this.lastPageX=p[0],this.lastPageY=p[1],this.setStartPosition(p)):el&&el.style&&el.style.display},setStartPosition:function(pos){var p=pos||Dom.getXY(this.getEl());this.deltaSetXY=null,this.startPageX=p[0],this.startPageY=p[1]},addToGroup:function(sGroup){this.groups[sGroup]=!0,this.DDM.regDragDrop(this,sGroup)},removeFromGroup:function(sGroup){this.groups[sGroup]&&delete this.groups[sGroup],this.DDM.removeDDFromGroup(this,sGroup)},setDragElId:function(id){this.dragElId=id},setHandleElId:function(id){"string"!=typeof id&&(id=Dom.generateId(id)),this.handleElId=id,this.DDM.regHandle(this.id,id)},setOuterHandleElId:function(id){"string"!=typeof id&&(id=Dom.generateId(id)),Event.on(id,"mousedown",this.handleMouseDown,this,!0),this.setHandleElId(id),this.hasOuterHandles=!0},unreg:function(){Event.removeListener(this.id,"mousedown",this.handleMouseDown),this._domRef=null,this.DDM._remove(this)},isLocked:function(){return this.DDM.isLocked()||this.locked},handleMouseDown:function(e,oDD){var mDownReturn,button=e.which||e.button;this.primaryButtonOnly&&1<button||this.isLocked()||(button=this.b4MouseDown(e),this.events.b4MouseDown&&(button=this.fireEvent("b4MouseDownEvent",e)),mDownReturn=this.onMouseDown(e),this.events.mouseDown&&(mDownReturn=this.fireEvent("mouseDownEvent",e)),!1!==button&&!1!==mDownReturn&&(this.DDM.refreshCache(this.groups),button=new YAHOO.util.Point(Event.getPageX(e),Event.getPageY(e)),this.hasOuterHandles||this.DDM.isOverTarget(button,this))&&this.clickValidator(e)&&(this.setStartPosition(),this.DDM.handleMouseDown(e,this),this.DDM.stopEvent(e)))},clickValidator:function(e){var target=YAHOO.util.Event.getTarget(e);return this.isValidHandleChild(target)&&(this.id==this.handleElId||this.DDM.handleWasClicked(target,this.id))},getTargetCoord:function(iPageX,iPageY){var x=iPageX-this.deltaX,y=iPageY-this.deltaY;return this.constrainX&&(x=x<this.minX?this.minX:x)>this.maxX&&(x=this.maxX),this.constrainY&&(y=y<this.minY?this.minY:y)>this.maxY&&(y=this.maxY),{x:x=this.getTick(x,this.xTicks),y:y=this.getTick(y,this.yTicks)}},addInvalidHandleType:function(tagName){var type=tagName.toUpperCase();this.invalidHandleTypes[type]=type},addInvalidHandleId:function(id){"string"!=typeof id&&(id=Dom.generateId(id)),this.invalidHandleIds[id]=id},addInvalidHandleClass:function(cssClass){this.invalidHandleClasses.push(cssClass)},removeInvalidHandleType:function(tagName){var type=tagName.toUpperCase();delete this.invalidHandleTypes[type]},removeInvalidHandleId:function(id){"string"!=typeof id&&(id=Dom.generateId(id)),delete this.invalidHandleIds[id]},removeInvalidHandleClass:function(cssClass){for(var i=0,len=this.invalidHandleClasses.length;i<len;++i)this.invalidHandleClasses[i]==cssClass&&delete this.invalidHandleClasses[i]},isValidHandleChild:function(node){var nodeName,valid=!0;try{nodeName=node.nodeName.toUpperCase()}catch(e){nodeName=node.nodeName}for(var valid=(valid=valid&&!this.invalidHandleTypes[nodeName])&&!this.invalidHandleIds[node.id],i=0,len=this.invalidHandleClasses.length;valid&&i<len;++i)valid=!Dom.hasClass(node,this.invalidHandleClasses[i]);return valid},setXTicks:function(iStartX,iTickSize){this.xTicks=[],this.xTickSize=iTickSize;for(var tickMap={},i=this.initPageX;i>=this.minX;i-=iTickSize)tickMap[i]||(tickMap[this.xTicks[this.xTicks.length]=i]=!0);for(i=this.initPageX;i<=this.maxX;i+=iTickSize)tickMap[i]||(tickMap[this.xTicks[this.xTicks.length]=i]=!0);this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(iStartY,iTickSize){this.yTicks=[],this.yTickSize=iTickSize;for(var tickMap={},i=this.initPageY;i>=this.minY;i-=iTickSize)tickMap[i]||(tickMap[this.yTicks[this.yTicks.length]=i]=!0);for(i=this.initPageY;i<=this.maxY;i+=iTickSize)tickMap[i]||(tickMap[this.yTicks[this.yTicks.length]=i]=!0);this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(iLeft,iRight,iTickSize){this.leftConstraint=parseInt(iLeft,10),this.rightConstraint=parseInt(iRight,10),this.minX=this.initPageX-this.leftConstraint,this.maxX=this.initPageX+this.rightConstraint,iTickSize&&this.setXTicks(this.initPageX,iTickSize),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(iUp,iDown,iTickSize){this.topConstraint=parseInt(iUp,10),this.bottomConstraint=parseInt(iDown,10),this.minY=this.initPageY-this.topConstraint,this.maxY=this.initPageY+this.bottomConstraint,iTickSize&&this.setYTicks(this.initPageY,iTickSize),this.constrainY=!0},resetConstraints:function(){var dx,dy;this.initPageX||0===this.initPageX?(dx=this.maintainOffset?this.lastPageX-this.initPageX:0,dy=this.maintainOffset?this.lastPageY-this.initPageY:0,this.setInitPosition(dx,dy)):this.setInitPosition(),this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(val,tickArray){if(tickArray){if(tickArray[0]>=val)return tickArray[0];for(var i=0,len=tickArray.length;i<len;++i){var next=i+1;if(tickArray[next]&&tickArray[next]>=val)return val-tickArray[i]<tickArray[next]-val?tickArray[i]:tickArray[next]}return tickArray[tickArray.length-1]}return val},toString:function(){return"DragDrop "+this.id}},YAHOO.augment(YAHOO.util.DragDrop,YAHOO.util.EventProvider)}(),YAHOO.util.DD=function(id,sGroup,config){id&&this.init(id,sGroup,config)},YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:!0,autoOffset:function(iPageX,iPageY){var x=iPageX-this.startPageX,y=iPageY-this.startPageY;this.setDelta(x,y)},setDelta:function(iDeltaX,iDeltaY){this.deltaX=iDeltaX,this.deltaY=iDeltaY},setDragElPos:function(iPageX,iPageY){var el=this.getDragEl();this.alignElWithMouse(el,iPageX,iPageY)},alignElWithMouse:function(el,iPageX,iPageY){var aCoord,newTop,oCoord=this.getTargetCoord(iPageX,iPageY),self=(this.deltaSetXY?(YAHOO.util.Dom.setStyle(el,"left",oCoord.x+this.deltaSetXY[0]+"px"),YAHOO.util.Dom.setStyle(el,"top",oCoord.y+this.deltaSetXY[1]+"px")):(aCoord=[oCoord.x,oCoord.y],YAHOO.util.Dom.setXY(el,aCoord),aCoord=parseInt(YAHOO.util.Dom.getStyle(el,"left"),10),newTop=parseInt(YAHOO.util.Dom.getStyle(el,"top"),10),this.deltaSetXY=[aCoord-oCoord.x,newTop-oCoord.y]),this.cachePosition(oCoord.x,oCoord.y),this);setTimeout(function(){self.autoScroll.call(self,oCoord.x,oCoord.y,el.offsetHeight,el.offsetWidth)},0)},cachePosition:function(iPageX,iPageY){var aCoord;iPageX?(this.lastPageX=iPageX,this.lastPageY=iPageY):(aCoord=YAHOO.util.Dom.getXY(this.getEl()),this.lastPageX=aCoord[0],this.lastPageY=aCoord[1])},autoScroll:function(x,y,h,w){var clientH,clientW,st,sl,right,toBot,toRight,scrAmt;this.scroll&&(clientH=this.DDM.getClientHeight(),clientW=this.DDM.getClientWidth(),st=this.DDM.getScrollTop(),sl=this.DDM.getScrollLeft(),right=w+x,toBot=clientH+st-y-this.deltaY,toRight=clientW+sl-x-this.deltaX,scrAmt=document.all?80:30,clientH<h+y&&toBot<40&&window.scrollTo(sl,st+scrAmt),y<st&&0<st&&y-st<40&&window.scrollTo(sl,st-scrAmt),clientW<right&&toRight<40&&window.scrollTo(sl+scrAmt,st),x<sl)&&0<sl&&x-sl<40&&window.scrollTo(sl-scrAmt,st)},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this),this.scroll=!1!==this.config.scroll},b4MouseDown:function(e){this.setStartPosition(),this.autoOffset(YAHOO.util.Event.getPageX(e),YAHOO.util.Event.getPageY(e))},b4Drag:function(e){this.setDragElPos(YAHOO.util.Event.getPageX(e),YAHOO.util.Event.getPageY(e))},toString:function(){return"DD "+this.id}}),YAHOO.util.DDProxy=function(id,sGroup,config){id&&(this.init(id,sGroup,config),this.initFrame())},YAHOO.util.DDProxy.dragElId="ygddfdiv",YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:!0,centerFrame:!1,createFrame:function(){var div,Dom,s,self=this,body=document.body;body&&body.firstChild?(div=this.getDragEl(),Dom=YAHOO.util.Dom,div||((div=document.createElement("div")).id=this.dragElId,(s=div.style).position="absolute",s.visibility="hidden",s.cursor="move",s.border="2px solid #aaa",s.zIndex=999,s.height="25px",s.width="25px",s=document.createElement("div"),Dom.setStyle(s,"height","100%"),Dom.setStyle(s,"width","100%"),Dom.setStyle(s,"background-color","#ccc"),Dom.setStyle(s,"opacity","0"),div.appendChild(s),YAHOO.env.ua.ie&&((s=document.createElement("iframe")).setAttribute("src","about:blank"),s.setAttribute("scrolling","no"),s.setAttribute("frameborder","0"),div.insertBefore(s,div.firstChild),Dom.setStyle(s,"height","100%"),Dom.setStyle(s,"width","100%"),Dom.setStyle(s,"position","absolute"),Dom.setStyle(s,"top","0"),Dom.setStyle(s,"left","0"),Dom.setStyle(s,"opacity","0"),Dom.setStyle(s,"zIndex","-1"),Dom.setStyle(s.nextSibling,"zIndex","2")),body.insertBefore(div,body.firstChild))):setTimeout(function(){self.createFrame()},50)},initFrame:function(){this.createFrame()},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this),this.resizeFrame=!1!==this.config.resizeFrame,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId)},showFrame:function(iPageX,iPageY){this.getEl();var dragEl=this.getDragEl(),s=dragEl.style;this._resizeProxy(),this.centerFrame&&this.setDelta(Math.round(parseInt(s.width,10)/2),Math.round(parseInt(s.height,10)/2)),this.setDragElPos(iPageX,iPageY),YAHOO.util.Dom.setStyle(dragEl,"visibility","visible")},_resizeProxy:function(){var DOM,el,dragEl,bt,bb,br,bl;this.resizeFrame&&(DOM=YAHOO.util.Dom,el=this.getEl(),dragEl=this.getDragEl(),bt=parseInt(DOM.getStyle(dragEl,"borderTopWidth"),10),br=parseInt(DOM.getStyle(dragEl,"borderRightWidth"),10),bb=parseInt(DOM.getStyle(dragEl,"borderBottomWidth"),10),bl=parseInt(DOM.getStyle(dragEl,"borderLeftWidth"),10),isNaN(bt)&&(bt=0),isNaN(br)&&(br=0),isNaN(bb)&&(bb=0),isNaN(bl)&&(bl=0),br=Math.max(0,el.offsetWidth-br-bl),bl=Math.max(0,el.offsetHeight-bt-bb),DOM.setStyle(dragEl,"width",br+"px"),DOM.setStyle(dragEl,"height",bl+"px"))},b4MouseDown:function(e){this.setStartPosition();var x=YAHOO.util.Event.getPageX(e),y=YAHOO.util.Event.getPageY(e);this.autoOffset(x,y)},b4StartDrag:function(x,y){this.showFrame(x,y)},b4EndDrag:function(e){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden")},endDrag:function(e){var DOM=YAHOO.util.Dom,lel=this.getEl(),del=this.getDragEl();DOM.setStyle(del,"visibility",""),DOM.setStyle(lel,"visibility","hidden"),YAHOO.util.DDM.moveToEl(lel,del),DOM.setStyle(del,"visibility","hidden"),DOM.setStyle(lel,"visibility","")},toString:function(){return"DDProxy "+this.id}}),YAHOO.util.DDTarget=function(id,sGroup,config){id&&this.initTarget(id,sGroup,config)},YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return"DDTarget "+this.id}}),YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.5.0",build:"895"});